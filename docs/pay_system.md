# O亿C小程序支付功能开发需求文档

## 付费说明

### 支付功能概要
本小程序采用"积分制"的消费体系，用户通过充值或者各种途径获取积分后,在每个角色卡在对话过程中就会消耗积分，按照一定比例扣除积分。用户注册可以获得部分注册激励点数，用户每日可以通过分享到群聊来获取一定点数。

## 功能需求

### 添加消费页面

**payment页面：从profile页面的'余额充值'进入**
**设计要求** ：
- 保持页面风格与其他页面的风格一致性
- 要有当前的余额入口，有当前的余额查询
- 有充值页面
- 
**usage页面：payment页面的明细查询**
**设计要求** ：
- 保持页面风格与其他页面的风格一致性
- 能够查询到当前用户的消费记录
- 能够返回上级目录


### 快捷更改比率和价值
- 我能够快速在代码端更改调用AI消耗的点数比率
- 我能够快速在代码添加充值内容（多少钱买多少点数）

### 安全的逻辑设计
- 用户的余额在数据库中存储
- 用户每次调用会被记录在数据库中
- 记录用户在


## 技术实现说明
- 用户部分需要记录用户的余额和记录用户的token用量（从dify端获取）
- 账单需要记录每一次调用所消耗的用户点数和token
